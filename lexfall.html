<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Word Grid Game â€” UI Improved</title>
<style>
  :root { --green:#3bb273; --green-soft:#bff0cf; --red:#dc3545; --blue:#336; --bg:#f7f7f8; --tile-bg:#fff; --tile-border:#cfcfd4; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; text-align: center; margin: 0; padding: 16px; background: var(--bg); color:#111; }
  h1 { margin: 6px 0 12px; font-size: 1.4rem; font-weight: 700; }
  #game { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; width: 100%; max-width: 420px; margin: 0 auto; }
  .tile { background: var(--tile-bg); border: 2px solid var(--tile-border); border-radius: 14px; display: flex; align-items: center; justify-content: center; user-select: none; position: relative; transition: transform 0.08s ease, box-shadow .12s ease; aspect-ratio: 1/1; }
  .tile:hover { transform: translateY(-2px); }
  .tile .letter { font-size: 2.1em; font-weight: 800; letter-spacing: .02em; }
  .tile .score { position: absolute; right: 6px; bottom: 4px; font-size: .72em; opacity: .8; }
  .tile.selected { box-shadow: 0 0 0 2px rgba(51,102,153,.18) inset; }
  .tile.selected.valid { background: var(--green-soft); border-color: var(--green); box-shadow: 0 0 0 2px rgba(59,178,115,.35) inset; }
  .tile.selected.invalid { background: #ffefef; border-color: var(--red); box-shadow: 0 0 0 2px rgba(220,53,69,.25) inset; }

  #controls { margin: 12px auto 0; display: flex; gap: 10px; justify-content: center; align-items:center; max-width: 420px; }
  button { padding: 10px 14px; border-radius: 10px; border: none; cursor: pointer; font-weight: 600; }
  #confirm { background: var(--green); color:#fff; display:none; }
  #reject { background: #e9e9ef; color:#111; display:none; }
  button[disabled] { opacity: .5; cursor: not-allowed; }

  #status { max-width: 420px; margin: 10px auto 0; text-align: left; }
  #status .card { background:#fff; border:1px solid #e4e4ea; border-radius: 12px; padding: 10px 12px; }
</style>
</head>
<body>
<h1>Word Grid</h1>
<div id="game"></div>
<div id="controls">
  <button id="confirm">Confirm</button>
  <button id="reject">Clear</button>
</div>
<div id="status"><div class="card">Select letters to form a word.</div></div>

<script>
const ROWS = 4, COLS = 4;
let grid = [], selectedTiles = [], DICT = new Set();
const LETTER_SCORES = { A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10 };

const gameEl = document.getElementById('game');
const statusEl = document.getElementById('status');
const btnConfirm = document.getElementById('confirm');
const btnReject  = document.getElementById('reject');

function randomLetter() {
  const letters = "EEEEEEEEEEEEAAAAAAAAAIIIIIIIIIOOOOOOOONNNNNNRRRRRRTTTTTLLLLSSSSUUUUDDDDGGGBBCCMMPPFFHHVVWWYYKJXQZ";
  return letters[Math.floor(Math.random() * letters.length)];
}

function makeGrid() {
  grid = [];
  for (let r = 0; r < ROWS; r++) {
    const row = [];
    for (let c = 0; c < COLS; c++) row.push({ letter: randomLetter(), element: null });
    grid.push(row);
  }
}

function renderGrid() {
  gameEl.innerHTML = '';
  for (let r = 0; r < ROWS; r++) {
    for (let c = 0; c < COLS; c++) {
      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.dataset.row = r; tile.dataset.col = c;
      const ch = grid[r][c].letter; const val = LETTER_SCORES[ch] || 0;
      tile.innerHTML = `<span class="letter">${ch}</span><span class="score">${val}</span>`;
      tile.addEventListener('click', () => selectTile(r, c));
      gameEl.appendChild(tile);
      grid[r][c].element = tile;
    }
  }
}

function selectTile(r, c) {
  // prevent re-selecting the same tile
  const idx = selectedTiles.findIndex(([rr, cc]) => rr === r && cc === c);
  if (idx >= 0) return;
  selectedTiles.push([r, c]);
  updateSelectionHighlight();
}

function updateSelectionHighlight() {
  document.querySelectorAll('.tile').forEach(t => t.classList.remove('selected', 'valid', 'invalid'));
  const word = currentWord().toUpperCase();
  const hasSel = selectedTiles.length > 0;
  const isValid = hasSel && DICT.has(word);
  selectedTiles.forEach(([r, c]) => {
    grid[r][c].element.classList.add('selected', isValid ? 'valid' : 'invalid');
  });
  updateButtons();
}

function updateButtons(){
  const hasSel = selectedTiles.length > 0;
  const isValid = hasSel && DICT.has(currentWord().toUpperCase());
  btnConfirm.style.display = isValid ? 'inline-block' : 'none';
  btnReject.style.display = hasSel ? 'inline-block' : 'none';
  btnReject.disabled = !hasSel;
}

function currentWord() {
  return selectedTiles.map(([r, c]) => grid[r][c].letter).join('');
}

function confirmWord() {
  const word = currentWord().toUpperCase();
  if (!DICT.has(word)) return; // shouldn't happen since hidden unless valid
  statusEl.innerHTML = `<div class="card">Confirmed word: <strong>${word}</strong></div>`;
  clearSelection();
}

function rejectWord() {
  clearSelection();
  statusEl.innerHTML = `<div class="card">Selection cleared.</div>`;
}

function clearSelection() {
  selectedTiles = [];
  updateSelectionHighlight();
}

async function loadDictionary() {
  const res = await fetch('en-words.txt');
  const text = await res.text();
  text.split(/\r?\n/).forEach(w => { const t = w.trim().toUpperCase(); if (t) DICT.add(t); });
}

btnConfirm.addEventListener('click', confirmWord);
btnReject.addEventListener('click', rejectWord);

(async function init(){
  await loadDictionary();
  makeGrid();
  renderGrid();
  updateButtons();
})();
</script>
</body>
</html>